Le llamamos refile al desperdicio que queda sobrando después de acomodar las cajas sobre la lamina.
Le llamamos salen a cuantas veces cabe la misma caja en la lamina, por ejemplo una caja de 50cm de ancho sale 2 veces en una lamina de 105cm de ancho y tiene un refile total de 5cm.
Se requiere planificar la producción de una máquina corrugadora de cartón en corridas, cada una procesando 1-2 tipos de cajas, maximizando uso de recursos y tiempos de entrega. Priorizar pedidos por criterio de fecha de entrega seguido de cantidad, con máximo 2 días de anticipación (extensible si necesario). Algunas laminas tienen cajas asociadas (cajas.id), esto se hace porque esa lamina es 100% compatible con dicha caja y solo debe verificarse su ancho para saber cuantas 'salen' pero no es necesario combinarla con otra caja (caja con diferente simbolo), esto no excluye a dichas laminas de poder ser usadas para combinaciones pero la restricción es que las cajas asociadas no se combinan. En caso contrario cuando no tienen cajas asociadas, se asume que esa lamina no es exclusiva y será usada para combinaciones. Las reglas de negocio: Agrupar pedidos por ECT, liner y tratamiento antihumedad, es decir que tanto la lamina como las cajas deben compartir estas características, por ejemplo si un pedido tiene tratamiento antihumedad no puede combinarse con una que no tenga dicho tratamiento, igual si no coinciden en liner o ECT no pueden ir juntas, de hecho estas dos características aplica a toda la lamina, por favor trata de usar el mínimo cambio de laminas posibles, es decir si de 10 pedidos 6 se pueden producir sobre la misma lamina esta genial asi se evitan cambios de rollo y se reducen errores. Refile (desperdicio): en un rango de 4cm a 8cm. Cajas en la lámina: Una caja puede estar hasta dos veces según el ancho de la lamina y puede combinarse con otra caja siempre y cuando sea suficiente el ancho de la lamina. Máximo 2 combinaciones de distinta caja por lámina (dos símbolos diferentes, a excepción de que sean cajas asociadas, en ese caso no deben combinarse, solo usarse la misma caja para llenar lo máximo posible de la lamina asociada). Si una caja no puede combinarse, se programa sola sin combinacion aceptando un refile y se marca como tira autorizada (te dare un formato de ejemplo). Jerarquía de pedidos: Para las combinaciones se toma como pedido prioritario aquel de mayor cantidad, el pedido complementario requiere de un calculo de cuantas piezas son posibles según los metros lineales del pedido prioritario, es decir, del prioritario son 500 piezas y 1203mts lineales, para que esto concuerde con el complemento se hace un calculo para saber cuantas piezas puedo sacar, por ejemplo 312. Te voy a proporcionar formulas para llegar a este calculo, naturalmente quedara un restante, mismo que deberá asignarse a otra corrida. formulas para cálculos: AQUIII ME QUEDEEE Metros lineales: ((cantidad * largo_caja / 100) / salen). Tiempo: metros_lineales / 65 (redondeado a entero). Complemento_piezas: ((cantidad_prioridad * largo_prioridad / salen_prioridad)) / (largo_complemento * salen_complemento) (redondeado a entero). Horario: Lunes: 8:20-18:00. Mar-Jue: 8:20-22:30. Viernes: 8:20-17:30. Llenar todo el horario antes de dejar espacios o hacer saltos. Las corridas se encadenan sin tiempos muertos. Si una corrida excede el horario del día, se ajusta al siguiente día. IMPORTANTE: TU RESPUESTA DEBE SER UN JSON SIN NINGUN OTRO MENSAJE O TEXTO.